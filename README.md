# Анализ результатов А/В тестирования. Проверка эффективности нового алгоритма рекомендации постов.
### Входные данные:
В приложении есть сервис ленты новостей. Команда дата сайентистов разработала новый алгоритм рекомендаций постов и провела эксперимент, чтобы проверить его эффективность. 
Новый алгоритм должен увеличить коэффициент кликабельности постов (CTR - click through rate). Эксперимент проводился в 2-х группах.  

**Время эксперимента:** с 2024-05-03 по 2024-05-09 включительно  
**Группа 1** - контрольная  
**Группа 2** - экспериментальная, использован новый алгоритм рекомендации постов  
**Основная гипотеза** - новый алгоритм во группе 2 приведет к увеличению CTR. 

**H0:** CTR_group_2 = CTR_group_1  
**H1:** CTR_group_2 != CTR_group_1  
**alpha** = 0.05 (уровень значимости)

Считаем, что система сплитования работает корректно, результат А/А теста удовлетворительный.  
См. задачу ["Анализ результатов А/А теста. Проверка корректности работы системы сплитования."](https://github.com/tatianavoronkova/AA-Test-Splitting-System-Analysis)

### Задача: проанализировать данные A/B теста
- Выбрать метод анализа и сравнить CTR в двух группах:
    - t-тест,
    - t-тест на сглаженном ctr (α=5), 
    - тест Манна-Уитни, 
    - Пуассоновский бутстреп, 
    - t-тест и тест Манна-Уитни поверх бакетного преобразования
- Сравнить данные этими тестами. Посмотрить на распределения, понять, почему тесты сработали именно так.
- Написать рекомендацию, стоит ли раскатывать новый алгоритм на всех новых пользователей.
### Результат:   
1. Распределение CTR в группе 1 похоже на нормальное, а в группе 2 - нет. Так как одно из ключевых предположений t-теста - это нормальность распределения, а мы видим, что это условие не выполняется, то рекомендуется использовать непараметрические методы или методы, устойчивые к нарушениям нормальности, чтобы получить более надежные результаты.  

<image src="/images/AB-Test-CTR-distribution.jpeg" alt="CTR distribution"> <image src="/images/AB-Test-CTR-Smoothed-distribution.jpeg" alt="Smoothed CTR distribution">  

    t-test и t-test на сглаженном CTR не опровергают нулевую гипотезу и не видят разницу между средним CTR (p-value > 0.05).  
    Это ошибка, которая обусловлена ненормальным распределением CTR группы 2.


2. Тест Манна-Уитни, Пуассоновский бетстреп и t-test поверх бакетного преобразования видят разницу в CTR, причем CTR_target < CTR_control. Это значит, что новый алгоритм рекомендаций постов не увеличил лайки относительно просмотров.

### Вывод:
Не рекомендуется раскатывать новый алгоритм на всех пользователей.
